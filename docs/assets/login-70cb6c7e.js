import{aJ as B,al as _e,f as fe,S as oe,bj as me,g as ue,d as U,bA as ce,bB as he,bC as ke,j as pe,k as ve,b2 as Ie,l as _,bD as Ee,bb as Le,n as L,q as le,V as ge,s as be,o as w,B as re,b as l,w as f,a as v,z as m,y as t,$ as ie,J as Ce,G as $,E as T,aY as ze,c as z,F as Q,ae as $e,af as Se,bE as Fe,bF as Oe,a0 as Te,bG as Ne,bH as Re,a5 as Ve,x as xe,ac as Ae,a1 as Z,a6 as Be,ba as Me,K as we,aP as M,a4 as A,bI as Ye,O as ye,a8 as De,a2 as Xe,aS as He,M as Pe,t as je,bJ as Ue,_ as We,bK as qe,bL as Ge,e as de}from"./index-e62fa27e.js";import{f as Je,F as Ke,G as Ze,c as Qe,b as et,E as tt,a as st}from"./el-form-item-68924bfb.js";import{u as at}from"./index-bf7933de.js";const nt=(a,i)=>{if(!B||!a||!i)return!1;const o=a.getBoundingClientRect();let n;return i instanceof Element?n=i.getBoundingClientRect():n={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},o.top<n.bottom&&o.bottom>n.top&&o.right>n.left&&o.left<n.right};var ot="Expected a function";function ne(a,i,o){var n=!0,d=!0;if(typeof a!="function")throw new TypeError(ot);return _e(o)&&(n="leading"in o?!!o.leading:n,d="trailing"in o?!!o.trailing:d),Je(a,i,{leading:n,maxWait:i,trailing:d})}const lt=fe({urlList:{type:oe(Array),default:()=>me([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:{type:Boolean,default:!1},teleported:{type:Boolean,default:!1},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),rt={close:()=>!0,switch:a=>ue(a)},it=["src"],ut=U({name:"ElImageViewer"}),ct=U({...ut,props:lt,emits:rt,setup(a,{expose:i,emit:o}){const n=a,d={CONTAIN:{name:"contain",icon:ce(he)},ORIGINAL:{name:"original",icon:ce(ke)}},{t:C}=pe(),u=ve("image-viewer"),{nextZIndex:N}=Ie(),h=_(),k=_([]),I=Ee(),p=_(!0),g=_(n.initialIndex),b=Le(d.CONTAIN),c=_({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),Y=L(()=>{const{urlList:e}=n;return e.length<=1}),R=L(()=>g.value===0),W=L(()=>g.value===n.urlList.length-1),ee=L(()=>n.urlList[g.value]),D=L(()=>{const{scale:e,deg:s,offsetX:r,offsetY:y,enableTransition:F}=c.value;let E=r/e,O=y/e;switch(s%360){case 90:case-270:[E,O]=[O,-E];break;case 180:case-180:[E,O]=[-E,-O];break;case 270:case-90:[E,O]=[-O,E];break}const x={transform:`scale(${e}) rotate(${s}deg) translate(${E}px, ${O}px)`,transition:F?"transform .3s":""};return b.value.name===d.CONTAIN.name&&(x.maxWidth=x.maxHeight="100%"),x}),te=L(()=>ue(n.zIndex)?n.zIndex:N());function V(){se(),o("close")}function X(){const e=ne(r=>{switch(r.code){case A.esc:n.closeOnPressEscape&&V();break;case A.space:P();break;case A.left:J();break;case A.up:S("zoomIn");break;case A.right:K();break;case A.down:S("zoomOut");break}}),s=ne(r=>{const y=r.deltaY||r.deltaX;S(y<0?"zoomIn":"zoomOut",{zoomRate:n.zoomRate,enableTransition:!1})});I.run(()=>{M(document,"keydown",e),M(document,"wheel",s)})}function se(){I.stop()}function ae(){p.value=!1}function q(e){p.value=!1,e.target.alt=C("el.image.error")}function G(e){if(p.value||e.button!==0||!h.value)return;c.value.enableTransition=!1;const{offsetX:s,offsetY:r}=c.value,y=e.pageX,F=e.pageY,E=ne(x=>{c.value={...c.value,offsetX:s+x.pageX-y,offsetY:r+x.pageY-F}}),O=M(document,"mousemove",E);M(document,"mouseup",()=>{O()}),e.preventDefault()}function H(){c.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function P(){if(p.value)return;const e=Ye(d),s=Object.values(d),r=b.value.name,F=(s.findIndex(E=>E.name===r)+1)%e.length;b.value=d[e[F]],H()}function j(e){const s=n.urlList.length;g.value=(e+s)%s}function J(){R.value&&!n.infinite||j(g.value-1)}function K(){W.value&&!n.infinite||j(g.value+1)}function S(e,s={}){if(p.value)return;const{zoomRate:r,rotateDeg:y,enableTransition:F}={zoomRate:n.zoomRate,rotateDeg:90,enableTransition:!0,...s};switch(e){case"zoomOut":c.value.scale>.2&&(c.value.scale=Number.parseFloat((c.value.scale/r).toFixed(3)));break;case"zoomIn":c.value.scale<7&&(c.value.scale=Number.parseFloat((c.value.scale*r).toFixed(3)));break;case"clockwise":c.value.deg+=y;break;case"anticlockwise":c.value.deg-=y;break}c.value.enableTransition=F}return le(ee,()=>{ge(()=>{const e=k.value[0];e!=null&&e.complete||(p.value=!0)})}),le(g,e=>{H(),o("switch",e)}),be(()=>{var e,s;X(),(s=(e=h.value)==null?void 0:e.focus)==null||s.call(e)}),i({setActiveItem:j}),(e,s)=>(w(),re(Me,{to:"body",disabled:!e.teleported},[l(Be,{name:"viewer-fade",appear:""},{default:f(()=>[v("div",{ref_key:"wrapper",ref:h,tabindex:-1,class:m(t(u).e("wrapper")),style:ie({zIndex:t(te)})},[v("div",{class:m(t(u).e("mask")),onClick:s[0]||(s[0]=Ce(r=>e.hideOnClickModal&&V(),["self"]))},null,2),$(" CLOSE "),v("span",{class:m([t(u).e("btn"),t(u).e("close")]),onClick:V},[l(t(T),null,{default:f(()=>[l(t(ze))]),_:1})],2),$(" ARROW "),t(Y)?$("v-if",!0):(w(),z(Q,{key:0},[v("span",{class:m([t(u).e("btn"),t(u).e("prev"),t(u).is("disabled",!e.infinite&&t(R))]),onClick:J},[l(t(T),null,{default:f(()=>[l(t($e))]),_:1})],2),v("span",{class:m([t(u).e("btn"),t(u).e("next"),t(u).is("disabled",!e.infinite&&t(W))]),onClick:K},[l(t(T),null,{default:f(()=>[l(t(Se))]),_:1})],2)],64)),$(" ACTIONS "),v("div",{class:m([t(u).e("btn"),t(u).e("actions")])},[v("div",{class:m(t(u).e("actions__inner"))},[l(t(T),{onClick:s[1]||(s[1]=r=>S("zoomOut"))},{default:f(()=>[l(t(Fe))]),_:1}),l(t(T),{onClick:s[2]||(s[2]=r=>S("zoomIn"))},{default:f(()=>[l(t(Oe))]),_:1}),v("i",{class:m(t(u).e("actions__divider"))},null,2),l(t(T),{onClick:P},{default:f(()=>[(w(),re(Te(t(b).icon)))]),_:1}),v("i",{class:m(t(u).e("actions__divider"))},null,2),l(t(T),{onClick:s[3]||(s[3]=r=>S("anticlockwise"))},{default:f(()=>[l(t(Ne))]),_:1}),l(t(T),{onClick:s[4]||(s[4]=r=>S("clockwise"))},{default:f(()=>[l(t(Re))]),_:1})],2)],2),$(" CANVAS "),v("div",{class:m(t(u).e("canvas"))},[(w(!0),z(Q,null,Ve(e.urlList,(r,y)=>xe((w(),z("img",{ref_for:!0,ref:F=>k.value[y]=F,key:r,src:r,style:ie(t(D)),class:m(t(u).e("img")),onLoad:ae,onError:q,onMousedown:G},null,46,it)),[[Ae,y===g.value]])),128))],2),Z(e.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var dt=we(ct,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]);const ft=ye(dt),mt=fe({hideOnClickModal:{type:Boolean,default:!1},src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:{type:Boolean,default:!1},scrollContainer:{type:oe([String,Object])},previewSrcList:{type:oe(Array),default:()=>me([])},previewTeleported:{type:Boolean,default:!1},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),pt={load:a=>a instanceof Event,error:a=>a instanceof Event,switch:a=>ue(a),close:()=>!0,show:()=>!0},vt=["src","loading"],gt={key:0},bt=U({name:"ElImage",inheritAttrs:!1}),wt=U({...bt,props:mt,emits:pt,setup(a,{emit:i}){const o=a;let n="";const{t:d}=pe(),C=ve("image"),u=De(),N=Ke(),h=_(),k=_(!1),I=_(!0),p=_(!1),g=_(),b=_(),c=B&&"loading"in HTMLImageElement.prototype;let Y,R;const W=L(()=>u.style),ee=L(()=>{const{fit:e}=o;return B&&e?{objectFit:e}:{}}),D=L(()=>{const{previewSrcList:e}=o;return Array.isArray(e)&&e.length>0}),te=L(()=>{const{previewSrcList:e,initialIndex:s}=o;let r=s;return s>e.length-1&&(r=0),r}),V=L(()=>o.loading==="eager"?!1:!c&&o.loading==="lazy"||o.lazy),X=()=>{B&&(I.value=!0,k.value=!1,h.value=o.src)};function se(e){I.value=!1,k.value=!1,i("load",e)}function ae(e){I.value=!1,k.value=!0,i("error",e)}function q(){nt(g.value,b.value)&&(X(),P())}const G=Ue(q,200,!0);async function H(){var e;if(!B)return;await ge();const{scrollContainer:s}=o;He(s)?b.value=s:Pe(s)&&s!==""?b.value=(e=document.querySelector(s))!=null?e:void 0:g.value&&(b.value=Ze(g.value)),b.value&&(Y=M(b,"scroll",G),setTimeout(()=>q(),100))}function P(){!B||!b.value||!G||(Y==null||Y(),b.value=void 0)}function j(e){if(e.ctrlKey){if(e.deltaY<0)return e.preventDefault(),!1;if(e.deltaY>0)return e.preventDefault(),!1}}function J(){D.value&&(R=M("wheel",j,{passive:!1}),n=document.body.style.overflow,document.body.style.overflow="hidden",p.value=!0,i("show"))}function K(){R==null||R(),document.body.style.overflow=n,p.value=!1,i("close")}function S(e){i("switch",e)}return le(()=>o.src,()=>{V.value?(I.value=!0,k.value=!1,P(),H()):X()}),be(()=>{V.value?H():X()}),(e,s)=>(w(),z("div",{ref_key:"container",ref:g,class:m([t(C).b(),e.$attrs.class]),style:ie(t(W))},[k.value?Z(e.$slots,"error",{key:0},()=>[v("div",{class:m(t(C).e("error"))},je(t(d)("el.image.error")),3)]):(w(),z(Q,{key:1},[h.value!==void 0?(w(),z("img",Xe({key:0},t(N),{src:h.value,loading:e.loading,style:t(ee),class:[t(C).e("inner"),t(D)&&t(C).e("preview"),I.value&&t(C).is("loading")],onClick:J,onLoad:se,onError:ae}),null,16,vt)):$("v-if",!0),I.value?(w(),z("div",{key:1,class:m(t(C).e("wrapper"))},[Z(e.$slots,"placeholder",{},()=>[v("div",{class:m(t(C).e("placeholder"))},null,2)])],2)):$("v-if",!0)],64)),t(D)?(w(),z(Q,{key:2},[p.value?(w(),re(t(ft),{key:0,"z-index":e.zIndex,"initial-index":t(te),infinite:e.infinite,"zoom-rate":e.zoomRate,"url-list":e.previewSrcList,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:K,onSwitch:S},{default:f(()=>[e.$slots.viewer?(w(),z("div",gt,[Z(e.$slots,"viewer")])):$("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):$("v-if",!0)],64)):$("v-if",!0)],6))}});var yt=we(wt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const _t=ye(yt);const ht=U({setup(){return{src:_("../../src/assets/logo.png")}},data(){return{n:30,userForm:{username:"",password:""},rules:{username:[{required:!0,message:"请输入正确的电子邮箱",trigger:"blur"},{type:"email",message:"电子邮箱格式错误",trigger:"blur"}],password:[{required:!0,message:"请输入正确的用户密码",trigger:"blur"},{min:8,message:"密码长度不得小于8个字符",trigger:"blur"}]}}},mounted(){},methods:{...qe(Ge,["setToken","fillUserinfo"]),btnLogin(){const a=this,i=a.$refs.ruleFormRef;i&&i.validate(o=>{if(o)at(a.userForm).then(d=>{if(d.success)a.$router.push("/");else return!1}).catch(d=>{console.log(d)});else return console.log("error submit!"),!1})},resetForm(){this.$refs.ruleFormRef.resetFields()}}}),kt={class:"login"},It={class:"login-form"},Et={class:"login-form-logo"};function Lt(a,i,o,n,d,C){const u=_t,N=et,h=tt,k=st,I=Qe;return w(),z("div",kt,[v("div",It,[v("div",Et,[l(u,{src:a.src,fit:"fill",lazy:!0},null,8,["src"])]),l(I,{ref:"ruleFormRef",model:a.userForm,"status-icon":"",rules:a.rules,class:"login-ruleForm"},{default:f(()=>[l(h,{prop:"username"},{default:f(()=>[l(N,{modelValue:a.userForm.username,"onUpdate:modelValue":i[0]||(i[0]=p=>a.userForm.username=p),autocomplete:"off",placeholder:"请输入你的用户邮箱","suffix-icon":"Message"},null,8,["modelValue"])]),_:1}),l(h,{prop:"password"},{default:f(()=>[l(N,{modelValue:a.userForm.password,"onUpdate:modelValue":i[1]||(i[1]=p=>a.userForm.password=p),type:"password",autocomplete:"off",placeholder:"请输入你的用户密码","suffix-icon":"Lock"},null,8,["modelValue"])]),_:1}),l(h,{class:"login-form-btns"},{default:f(()=>[l(k,{type:"primary",onClick:a.btnLogin},{default:f(()=>[de("用户登录")]),_:1},8,["onClick"]),l(k,{onClick:a.resetForm},{default:f(()=>[de("Reset")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])])])}const St=We(ht,[["render",Lt],["__scopeId","data-v-71ce1c4d"]]);export{St as default};
